| Variable                          | Required |                                  Default |                      Type | Description                                                                        | Suggested / example value                                      |
| --------------------------------- | :------: | ---------------------------------------: | ------------------------: | ---------------------------------------------------------------------------------- | -------------------------------------------------------------- |
| `ALERTS_BUCKET`                   |  **Yes** |                                        — |                    string | S3 bucket containing input alert files under `alerts/year=.../month=.../day=.../`. | `sre-digest-alerts-data`                                        |
| `TEAMS_WEBHOOK`                   |  **Yes** |                                        — |              string (URL) | Microsoft Teams incoming webhook used to post digest Markdown.                     | `https://outlook.office.com/webhook/...`                       |
| `MODEL_ID`                        |    No    | `anthropic.claude-3-haiku-20240307-v1:0` |                    string | Default Bedrock model id used for LLM calls.                                       | `anthropic.claude-3-haiku-20240307-v1:0` or your Bedrock model |
| `DIGEST_INTERVAL_MINUTES`         |    No    |                                     `90` |                       int | Digest/aggregation window in minutes (used if no `minutes` in event).              | `60` (hourly) or `1440` (daily)                                |
| `OUTPUT_TIMEZONE`                 |    No    |                           `Asia/Kolkata` |                    string | Timezone for human timestamps in digests.                                          | `Asia/Kolkata`                                                 |
| `MAX_ALERTS`                      |    No    |                                   `1500` |                       int | Max number of alerts to collect per run.                                           | `2000`                                                         |
| `MAX_BODIES_PER_CALL`             |    No    |                                     `90` |                       int | Number of alert bodies sent per Bedrock chunk.                                     | `50-120` (depends on model limits)                             |
| `LITE_DIGEST`                     |    No    |                                  `false` | bool (`"true"`/`"false"`) | If `true`, post the lite-format digest.                                            | `false`                                                        |
| `BEDROCK_CONCURRENCY`             |    No    |                                      `6` |                       int | Parallel threads for Bedrock chunk invocations.                                    | `4-8`                                                          |
| `BEDROCK_MAX_RETRIES`             |    No    |                                      `4` |                       int | Max retry attempts for Bedrock invocations.                                        | `3-5`                                                          |
| `BEDROCK_RETRY_BASE_DELAY`        |    No    |                                   `0.75` |                     float | Base seconds for exponential backoff on Bedrock retries.                           | `0.5`–`1.0`                                                    |
| `DEBUG_MODE`                      |    No    |                                   `true` |                      bool | More verbose logging and parse warnings when `true`.                               | `false` in prod                                                |
| `SAVE_BEDROCK_LOGS`               |    No    |                                  `false` |                      bool | If `true`, save Bedrock request/response payloads to S3 (see bucket/prefix).       | `false` (enable for debugging)                                 |
| `BEDROCK_LOGS_S3_BUCKET`          |    No    |                                     `""` |                    string | Target bucket to store Bedrock logs when `SAVE_BEDROCK_LOGS=true`.                 | `company-logs-bucket`                                          |
| `BEDROCK_LOGS_S3_PREFIX`          |    No    |                       `bedrock/digests/` |                    string | Key prefix for Bedrock logs in S3.                                                 | `bedrock/digests/`                                             |
| `LOG_ALERT_DETAIL`                |    No    |                                   `true` |                      bool | When `true` logs alert details (up to `ALERT_LOG_LIMIT`) in debug mode.            | `false` in prod                                                |
| `ALERT_LOG_LIMIT`                 |    No    |                                    `100` |                       int | Max number of collected alerts to log when debugging.                              | `50`                                                           |
| `LOG_BEDROCK_FULL`                |    No    |                                  `false` |                      bool | If `true`, allow logging of full Bedrock outputs up to `BEDROCK_FULL_MAX_CHARS`.   | `false`                                                        |
| `BEDROCK_FULL_MAX_CHARS`          |    No    |                                   `4000` |                       int | Max chars to log from Bedrock full response if `LOG_BEDROCK_FULL=true`.            | `4000`                                                         |
| `LOG_SKIPPED_TIME`                |    No    |                                  `false` |                      bool | If `true`, logs when start time was capped by `MAX_CATCHUP_MINUTES`.               | `false`                                                        |
| `SKIPPED_TIME_LIMIT`              |    No    |                                     `20` |                       int | Limit (minutes) used in skipped time logging logic.                                | `20`                                                           |
| `GENERATE_EXEC_SUMMARY`           |    No    |                                   `true` |                      bool | If `true`, generate an executive summary via Bedrock.                              | `true`                                                         |
| `EXEC_SUMMARY_MODEL_ID`           |    No    |                    (inherits `MODEL_ID`) |                    string | Model id for executive summary; if unset, uses `MODEL_ID`.                         | set to a smaller/faster model if desired                       |
| `GENERATE_PRODUCT_COMPONENTS`     |    No    |                                   `true` |                      bool | If `true`, call product/component enrichment for groups.                           | `true`                                                         |
| `PRODUCT_COMPONENT_MODEL_ID`      |    No    |                    (inherits `MODEL_ID`) |                    string | Model id for product/component enrichment; defaults to `MODEL_ID`.                 | optional override                                              |
| `STRICT_GOVM_ONLY_IN_ALERTS_PROD` |    No    |                                   `true` |                      bool | If `true` and channel == `alerts_prod`, non-GovMeetings alerts are dropped.        | `true` (default) or `false` to relax                           |
| `GOVM_EXTRA_KEYWORDS`             |    No    |                                     `""` |              string (csv) | Extra case-insensitive tokens to treat as GovMeetings keywords.                    | `iqm,swagit`                                                   |
| `GOVM_SUBPRODUCTS_JSON`           |    No    |                                   `"{}"` |               JSON string | JSON mapping to override canonical GovMeetings subproduct names.                   | `{"iqm":"IQM","swagit":"Swagit"}`                              |
| `PRODUCT_ALIAS_JSON`              |    No    |                                   `"{}"` |               JSON string | JSON alias → canonical product mappings (ad-hoc aliases).                          | `{"gm:iqm":"IQM","esignnotify":"IQM"}`                         |
| `CRITICAL_CHANNELS`               |    No    |                                     `""` |              string (csv) | Exact channel names that should be treated as Critical.                            | `alerts_prod,urgent`                                           |
| `WARNING_CHANNELS`                |    No    |                                     `""` |              string (csv) | Exact channel names that should be treated as Warning.                             | `alerts_warn`                                                  |
| `CRITICAL_CHANNEL_HINTS`          |    No    |           `critical,crit,sev1,p1,urgent` |              string (csv) | Substrings in channel names that imply Critical severity.                          | use default or add org-specific hints                          |
| `WARNING_CHANNEL_HINTS`           |    No    |             `warning,warn,sev2,p2,alert` |              string (csv) | Substrings in channel names that imply Warning severity.                           | use default or add org-specific hints                          |
| `DIGEST_STATE_BUCKET`             |    No    |          (falls back to `ALERTS_BUCKET`) |                    string | Bucket used to persist digest state JSON; default = `ALERTS_BUCKET`.               | same as `ALERTS_BUCKET` or a dedicated state bucket            |
| `DIGEST_STATE_KEY`                |    No    |            `state/sre-digest-state.json` |                    string | Key (object name) for saved state in S3.                                           | keep default or `state/sre-digest-state.json`                  |
| `USE_PREV_WINDOW`                 |    No    |                                   `true` |                      bool | If `true`, next window start = last saved end + 1µs (with max lookback cap).       | `true`                                                         |
| `MAX_CATCHUP_MINUTES`             |    No    |                                    `180` |                       int | If state indicates a very old last end, caps lookback to this many minutes.        | `180`                                                          |
| `TEAMS_MAX_CHARS`                 |    No    |                                  `24000` |                       int | Max allowed Markdown length before truncation to fit Teams.                        | `24000`                                                        |